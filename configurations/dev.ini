# ============================================================================
# MiniFlow Development Configuration
# ============================================================================
# This configuration file is used when APP_ENV=dev
# Optimized for development with hot reload and debugging

[Test]
# Test validation key (required for configuration validation)
value = ThisKeyIsForConfigTest

[Database]
# Database connection settings
db_type = sqlite
db_path = ./miniflow.db
db_name = miniflow
db_host = localhost
db_port = 5432
db_user = postgres
db_password = 
seed_data_path = ./seeds/

[Redis]
# Redis connection settings for rate limiting and caching
host = localhost
port = 6379
db = 0
password = 
max_connections = 50
socket_timeout = 5
socket_connect_timeout = 5
decode_responses = True

[Rate Limiting]
# IP-based rate limiting (middleware level)
ip_requests_per_minute = 1000
ip_requests_per_hour = 10000

# User-based rate limiting (JWT authenticated requests)
user_requests_per_minute = 600
user_requests_per_hour = 6000
user_requests_per_day = 60000

[AUTH]
# Login rate limiting
max_failed_attempts = 5
rate_limit_window_minutes = 5

# Lockout escalation (tiered locking system)
# Lockout duration formula: base * (2 ^ (lock_count - 1))
# Example: base=15 â†’ 15min, 30min, 60min, then permanent
lockout_base_duration_minutes = 15
max_lockouts_before_permanent = 3
lockout_history_window_hours = 24

# Session management
max_active_sessions = 5

# Login history retention
max_login_history_per_user = 10

# Password history (prevent reuse)
max_password_history_count = 5

[USER]
# Account deletion grace period
deletion_grace_period_days = 30

[JWT Settings]
# JWT token expiration settings
jwt_access_token_expire_minutes = 60
jwt_refresh_token_expire_days = 7
access_token_type = access
refresh_token_type = refresh

[FILE OPERATIONS]
# File upload limits and restrictions
max_file_size_mb = 100
allowed_extensions = .pdf,.doc,.docx,.txt,.rtf,.odt,.xls,.xlsx,.csv,.ods,.ppt,.pptx,.odp,.jpg,.jpeg,.png,.gif,.bmp,.webp,.svg,.mp4,.avi,.mov,.wmv,.flv,.mkv,.webm,.mp3,.wav,.ogg,.m4a,.flac,.zip,.tar,.gz,.rar,.7z,.json,.xml,.yaml,.yml
blocked_extensions = .exe,.bat,.cmd,.com,.pif,.scr,.vbs,.js,.jar,.msi,.app,.deb,.rpm,.dmg,.pkg,.sh,.bash,.zsh,.fish,.ps1,.psm1,.psd1,.py,.rb,.pl,.php,.cgi,.asp,.aspx,.jsp,.html,.htm,.css,.sys,.dll,.so,.dylib,.reg,.inf,.msp,.gadget,.lnk,.apk
allowed_mime_types = application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,application/rtf,application/vnd.oasis.opendocument.text,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/csv,application/vnd.oasis.opendocument.spreadsheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.oasis.opendocument.presentation,image/jpeg,image/png,image/gif,image/bmp,image/webp,image/svg+xml,video/mp4,video/x-msvideo,video/quicktime,video/x-ms-wmv,video/x-flv,video/x-matroska,video/webm,audio/mpeg,audio/wav,audio/ogg,audio/mp4,audio/flac,application/zip,application/x-tar,application/gzip,application/x-rar-compressed,application/x-7z-compressed,application/json,application/xml,text/yaml,text/yml

[CUSTOM SCRIPTS]
# Custom script upload settings
allowed_script_extensions = .py
allowed_script_mime_types = text/x-python
max_script_size_mb = 1
script_validation_enabled = true

[GLOBAL SCRIPTS]
# Global script upload settings
allowed_script_extensions = .py
allowed_script_mime_types = text/x-python
max_script_size_mb = 5

[WORKFLOW]
# Workflow trigger limits
min_triggers_per_workflow = 1
max_triggers_per_workflow = 10

# Node execution defaults
default_max_retries = 3
default_timeout_seconds = 300

[SCHEDULER_SERVICE]
# Type conversion accepted values
accepted_string_values = string,text,str
accepted_integer_values = number,integer,int
accepted_float_values = float
accepted_boolean_values = bool,boolean
accepted_array_values = array,list
accepted_object_values = object,dict,json

[INPUT_HANDLER]
# Input handler configuration (execution input processing)
input_handler_batch_size = 50
input_handler_worker_threads = 4
input_handler_max_retries = 3
input_handler_context_timeout = 30.0
input_handler_engine_timeout = 60.0
input_handler_min_polling_interval = 0.1
input_handler_max_polling_interval = 5.0
input_handler_retry_delay = 1.0
input_handler_adaptive_polling = true
input_handler_parallel_context = true

[OUTPUT_HANDLER]
# Output handler configuration (execution result processing)
output_handler_batch_size = 50
output_handler_worker_threads = 4
output_handler_max_retries = 3
output_handler_result_timeout = 60.0
output_handler_min_polling_interval = 0.1
output_handler_max_polling_interval = 5.0
output_handler_retry_delay = 1.0
output_handler_adaptive_polling = true
output_handler_parallel_processing = true

[Mailtrap]
# Mailtrap email service configuration
# Note: MAILTRAP_API_KEY must be set in .env file
sender_email = enes@vidinsight.com.tr
sender_name = vidinsight
welcome_template_id = d2945577-5fff-4cb8-bcff-ebe7fbaf713c
verification_template_id = 2d9b707a-3b29-44a1-a0a0-8a8efe552fce
password_reset_template_id = 6c39810f-46c5-4e9d-a32e-8dc5e98d2b95
notification_template_id = d9161ce8-3aec-4d0e-b2ee-3ed14b0f9399

[Server]
# FastAPI server configuration
title = Miniflow Enterprise API
description = Workflow automation and management API
version = 1.0.0
allowed_origins = http://localhost:3000,https://yourdomain.com
host = 0.0.0.0
port = 8000
reload = True
workers = 1
